[{invert}]
= Pr√©parer votre environnement de travail

// Particularit√©s de la fac
== Particularit√©s du r√©seau
include::./sous-chapitres/dev-env/proxy.adoc[leveloffset=1]

// Environnement Cloud
== Environnement Cloud : GitHub Codespaces ‚òÅÔ∏è

include::./sous-chapitres/dev-env/github-codespaces.adoc[leveloffset=-1]

== üê≥ Installation locale de Docker

=== Ubuntu 25.04 et le conflit Podman ‚ö†Ô∏è

**Probl√®me :** Ubuntu 25.04+ est livr√© avec Podman par d√©faut, ce qui peut emp√™cher Docker de fonctionner correctement.

**Sympt√¥me :** Erreur "Cannot connect to the Docker daemon"

[.columns]
=== Solutions au conflit

[.column]
--
[.small]
**Solution 1 : Variable DOCKER_HOST**

[source,bash]
----
export DOCKER_HOST=unix:///var/run/docker.sock
docker ps
----

Permanent : Ajouter √† `~/.bashrc`
--

[.column]
--
[.small]
**Solution 2 : D√©sinstaller Podman** ‚úÖ

[source,bash]
----
sudo apt remove podman
sudo apt install docker.io
sudo systemctl enable --now docker
sudo usermod -aG docker $USER
----

‚ö†Ô∏è Logout/login requis apr√®s `usermod`
--

[.notes]
--
**CONTEXTE - UBUNTU 25.04 ET PODMAN :**

Ubuntu 25.04 (Noble Numbat) marque un changement majeur : Podman devient le moteur de conteneurs par d√©faut √† la place de Docker.

**Pourquoi ce changement ?**
- Podman est "daemonless" (pas de daemon en root)
- Mieux int√©gr√© avec systemd
- Compatible OCI (Open Container Initiative)
- Plus s√©curis√© par d√©faut (rootless)

**Le conflit :**
- Podman cr√©e un socket `/run/podman/podman.sock` (ou rootless: `/run/user/$UID/podman/podman.sock`)
- Docker cherche `/var/run/docker.sock`
- Si les deux sont install√©s : confusion entre les sockets

**Solution 1 - DOCKER_HOST :**
‚úÖ Rapide, non-destructif
‚úÖ Permet de garder Podman install√©
‚ùå Doit √™tre configur√© pour chaque session/utilisateur
‚ùå Peut causer confusion si oubli√©

**Solution 2 - D√©sinstaller Podman :**
‚úÖ Solution propre et d√©finitive
‚úÖ Pas de configuration suppl√©mentaire
‚úÖ Recommand√© pour un cours Docker
‚ùå Supprime Podman si vous en avez besoin

**Pour le TP :**
- Recommander Solution 2 si les √©tudiants ne connaissent pas Podman
- Solution 1 acceptable pour tests rapides
- Dans GitHub Codespaces : aucun probl√®me, Docker pr√©configur√©

**Alternative bonus - Podman :**
Si vous voulez enseigner Podman au lieu de Docker :
[source,bash]
----
alias docker=podman
----
Podman est compatible avec la CLI Docker !

**MESSAGE CL√â :**
"Ubuntu 25.04 privil√©gie Podman, mais pour ce cours Docker, choisissez une solution claire : soit Docker seul, soit Podman avec alias. √âvitez d'avoir les deux install√©s simultan√©ment sans configuration."
--

[.small]
On peut commencer !

