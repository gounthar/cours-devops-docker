=== Ubuntu 25.04 et le conflit Podman ‚ö†Ô∏è

**Probl√®me :** Ubuntu 25.04+ est livr√© avec Podman par d√©faut

**Sympt√¥me :** `Cannot connect to the Docker daemon`

[.small]
‚ö†Ô∏è Conflit entre `/var/run/docker.sock` et `/run/podman/podman.sock`

[.columns]
=== Solutions au conflit

[.column]
--
**Solution 1 : Installer Docker**

[source,bash]
----
sudo apt install docker.io
sudo systemctl enable --now docker
sudo usermod -aG docker $USER
----

[.small]
‚ö†Ô∏è Logout/login requis pour groupe docker
--

[.column]
--
**Solution 2 : D√©sinstaller Podman** ‚úÖ

[source,bash]
----
sudo apt remove podman
sudo apt install docker.io
sudo systemctl enable --now docker
sudo usermod -aG docker $USER
----

[.small]
‚ö†Ô∏è Logout/login requis
--

=== Environnement pr√™t ! ‚úÖ

Votre environnement Docker est maintenant configur√© üéâ

[.small]
* ‚úÖ GitHub Codespaces : Docker d√©j√† install√©
* ‚úÖ Ubuntu 25.04 : Conflit Podman r√©solu
* ‚úÖ Pr√™t pour la suite !

=== Prochaine √©tape üöÄ

Avant de d√©couvrir Docker, un d√©tour essentiel...

[%step]
**La ligne de commande (CLI)**

[%step]
[.small]
Docker s'utilise exclusivement en ligne de commande !

=== Pourquoi la CLI ? üíª

[%step]
* üñ•Ô∏è Interface fondamentale pour Docker
[%step]
* üîß Base de tous les outils DevOps
[%step]
* üí™ Comp√©tence indispensable pour automatiser

[%step]
[.small]
‚û°Ô∏è **Prochain chapitre :** Guide de survie de la ligne de commande

[.notes]
--
**CONTEXTE - UBUNTU 25.04 ET PODMAN :**

Ubuntu 25.04 (Noble Numbat) marque un changement majeur : Podman devient le moteur de conteneurs par d√©faut √† la place de Docker.

**Pourquoi ce changement ?**
- Podman est "daemonless" (pas de daemon en root)
- Mieux int√©gr√© avec systemd
- Compatible OCI (Open Container Initiative)
- Plus s√©curis√© par d√©faut (rootless)

**Le conflit :**
- Podman cr√©e un socket `/run/podman/podman.sock` (ou rootless: `/run/user/$UID/podman/podman.sock`)
- Docker cherche `/var/run/docker.sock`
- Si les deux sont install√©s : confusion entre les sockets

**Solution 1 - Installer Docker :**
‚úÖ Installation compl√®te et propre
‚úÖ Docker d√©marre automatiquement au boot (systemctl enable)
‚úÖ Utilisateur ajout√© au groupe docker
‚ùå N√©cessite logout/login pour activer le groupe
‚ùå Garde Podman install√© (peut causer confusion)

**Explication des commandes Solution 1 :**
- `apt install docker.io` : Installe Docker Engine
- `systemctl enable --now docker` : Active et d√©marre le service Docker
- `usermod -aG docker $USER` : Ajoute l'utilisateur au groupe docker
- **Important** : Re-login requis pour que le groupe s'applique

**Solution 2 - D√©sinstaller Podman :**
‚úÖ Solution la plus propre et d√©finitive
‚úÖ Pas de configuration suppl√©mentaire
‚úÖ Recommand√© pour un cours Docker
‚úÖ √âvite confusion entre Docker et Podman
‚ùå Supprime Podman (si vous en avez besoin)

**Pour le TP :**
- Recommander Solution 2 si les √©tudiants ne connaissent pas Podman
- Solution 1 si vous voulez garder Podman pour d'autres usages
- Dans GitHub Codespaces : aucun probl√®me, Docker pr√©configur√©

**V√©rification post-installation :**
[source,bash]
----
# V√©rifier que Docker tourne
sudo systemctl status docker

# V√©rifier l'appartenance au groupe (apr√®s re-login)
groups | grep docker

# Tester Docker (sans sudo)
docker run hello-world
----

**Note Docker Compose :**
- `docker.io` sur Ubuntu inclut `docker compose` (v2, plugin)
- Commande : `docker compose` (pas `docker-compose`)
- Si vous utilisez Podman : installer `podman-compose` s√©par√©ment

**Alternative bonus - Podman :**
Si vous voulez enseigner Podman au lieu de Docker :
[source,bash]
----
alias docker=podman
----
‚ö†Ô∏è Attention : L'alias ne fournit PAS `docker compose`
- Utilisez `podman-compose` √† la place
- Podman est compatible CLI Docker mais pas 100% identique

**MESSAGE CL√â :**
"Ubuntu 25.04 privil√©gie Podman, mais pour ce cours Docker, choisissez une solution claire : soit Docker seul, soit Podman avec alias. √âvitez d'avoir les deux install√©s simultan√©ment sans configuration."
--
